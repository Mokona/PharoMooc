% $Author: ducasse $
% $Date: 2005/11/06 13:11:22 $
% $Revision: 1.2 $
\ifx\wholebook\relax\else
\input{../Common.tex}
\begin{document}
\fi


\chapter{Objects and expressions}

This lesson is about reading and understanding Smalltalk
expressions, and differentiating between different types of
messages and receivers. Note that in the expressions you will be
asked to read and evaluate, you can assume that the implementation
of methods generally corresponds to what their message names imply
(\ie \ct{2 + 2 = 4}). \\
\exercise For each of the Smalltalk
expressions below, fill in the answers:

\begin{scode}
3 + 4
\end{scode}

\begin{itemize}
\item What is the receiver object?
\item What is the message selector?
\item What is/are the argument (s)?
\item What is the message?
\item What is the result returned by evaluating this expression?
\end{itemize}

\begin{scode}
Date today
\end{scode}
\begin{itemize}
\item What is the receiver object?
\item What is the message selector?
\item What is/are the argument (s)?
\item What is the message?
\item What is the result returned by evaluating this expression?
\end{itemize}

\begin{scode}
anArray at: 1 put: 'hello'
\end{scode}

\begin{itemize}
\item What is the receiver object?
\item What is the message selector?
\item What is/are the argument (s)?
\item What is the message?
\item What is the result returned by evaluating this expression?
\end{itemize}

\exercise What kind of object does the literal expression \stc{'Hello, Dave'} describe?

\exercise What kind of object does the literal expression \stc{\#Node1} describe?

\exercise What kind of object does the literal expression \stc{\#(1 2 3)} describe?

\exercise What can one assume about a variable named \stc{Transcript}?

\exercise What can one assume about a variable named \stc{rectangle}?

\exercise Examine the following expression:

\begin{scode}
\stBar anArray \stBar
anArray := \#('first' 'second' 'third' 'fourth').
anArray at: 2
\end{scode}

What is the resulting value when it is evaluated (\^{ } means return)?
What happens if you remove the \^{ }. Explain

\exercise Which sets of parentheses are redundant with regard to
evaluation of the following expressions:

\begin{scode}
((3 + 4) + (2 * 2) + (2 * 3))

(x isZero)
   ifTrue: [....]
(x includes: y)
   ifTrue: [....]
\end{scode}

\exercise Guess what are the results of the following expressions

\begin{scode}
6 + 4 / 2
1 + 3 negated
1 + (3 negated)
2 raisedTo: 3 + 2
2 negated raisedTo: 3 + 2
\end{scode}

\exercise Examine the following expression:
\begin{scode}
25@50
\end{scode}

\begin{itemize}
\item What is the receiver object?
\item What is the message selector?
\item What is/are the argument (s)?
\item What is the message?
\item What is the result returned by evaluating this expression?
\end{itemize}

\exercise Examine the following expression and write down the sequence of steps that the Smalltalk system would take to execute the following expression:
\begin{scode}
Date today daysInMonth
\end{scode}
\exercise Examine the following expression and write down the
sequence of steps that the Smalltalk system would take to execute
the following expression:
\begin{scode}
Transcript show: (45 + 9) printString
\end{scode}
\exercise Examine the following expression and write down the
sequence of steps that the Smalltalk system would take to execute
the following expression:
\begin{scode}
5@5 extent: 6.0 truncated @ 7
\end{scode}
\exercise During lecture, we saw how to write strings to the
Transcript, and how the message \stc{printString} could be sent
to any non-string object to obtain a string representation. Now
write a Smalltalk expression to print the result of \stc{34 +
89} on the Transcript. Test your code !

\newpage
\exercise Examine the block expression:

\begin{scode}
\stBar anArray sum \stBar
sum := 0.
anArray := \#(21 23 53 66 87).
anArray do: [:item \stBar sum := sum + item].
sum
\end{scode}

What is the final result of sum ? How could this piece of code be
rewritten to use explicit array indexing (with the method
\stc{at:} ) to access the array elements\footnote{Note this is
how you would proceed with Java or C++}? Test your version.
Rewrite this code using \stc{inject:into:}


\ifx\wholebook\relax\else\end{document}\fi
